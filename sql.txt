CREATE TABLE role_info
(
    id        INT         NOT NULL PRIMARY KEY AUTO_INCREMENT COMMENT '角色编号，主键，自动增长',
    role_name VARCHAR(32) NOT NULL COMMENT '角色名称'
) COMMENT '角色信息';

CREATE TABLE user_info
(
    id       INT PRIMARY KEY UNIQUE NOT NULL AUTO_INCREMENT COMMENT '用户编号，主键，自动增长',
    username VARCHAR(20)            NOT NULL COMMENT '用户登陆时使用的帐号名称',
    pwd      VARCHAR(32)            NOT NULL COMMENT '用户登陆时使用的密码',
    role_id  INT                    NOT NULL COMMENT '用户的角色 ID,外键' REFERENCES role_info (id),
    locked   INT                    NOT NULL DEFAULT 0 COMMENT '用户是否被锁定：0-未锁定，1-锁定',
    faceimg  VARCHAR(50)            NOT NULL DEFAULT 'default.jpg' COMMENT '用户头像图片名'
) COMMENT '用户信息';

CREATE TABLE dishes_info
(
    id                 INT          NOT NULL PRIMARY KEY AUTO_INCREMENT COMMENT '菜品编号，主键，自动增长',
    dishes_name        VARCHAR(100) NOT NULL COMMENT '菜品名称',
    dishes_description VARCHAR(100) NOT NULL COMMENT '菜品的简单介绍',
    dishes_img         VARCHAR(100) NOT NULL DEFAULT 'default.jpg' COMMENT '菜品图片文件名称',
    dishes_txt         VARCHAR(400) NOT NULL COMMENT '菜品的简单介绍',
    recommend          INT          NOT NULL DEFAULT 0 COMMENT '是否推荐菜品：0-非推荐，1-推荐菜品',
    dishes_price       FLOAT        NOT NULL COMMENT '菜品单价'
) COMMENT '菜品信息';

CREATE TABLE order_info
(
    id               INT      NOT NULL PRIMARY KEY AUTO_INCREMENT COMMENT '订单编号，主键，自动增长',
    order_begin_date DATETIME NOT NULL COMMENT '订单开始时间',
    order_end_date   DATETIME NOT NULL COMMENT '订单结束时间',
    waiter_id        INT      NOT NULL COMMENT '订单的点餐员ID,外键 user_info.id' REFERENCES user_info (id),
    order_status     INT      NOT NULL DEFAULT 0 COMMENT '订单状态：0-正在用餐，1-准备结帐，2-已经结帐，3-免单订单',
    table_id         INT      NOT NULL COMMENT '订单的桌号'
) COMMENT '订单信息';

CREATE TABLE order_dishes
(
    id        INT NOT NULL COMMENT '详单编号，主键，自动增长',
    order_id  INT NOT NULL COMMENT '对应订单编号，外键 order_info.id' REFERENCES order_info (id),
    dishes_id INT NOT NULL COMMENT '对应菜品编号，外键 dishes_info.id' REFERENCES dishes_info (id),
    num       INT NOT NULL COMMENT '菜品的数量'
) COMMENT '订单菜品';

-- insert
INSERT INTO role_info(role_name)
VALUES ('餐厅管理员'),
       ('餐厅服务员'),
       ('后厨人员');

-- pwd: 123456
INSERT INTO user_info(username, pwd, role_id)
VALUES ('root', 'e10adc3949ba59abbe56e057f20f883e', 1);

INSERT INTO order_info()
VALUES ();

INSERT INTO order_dishes()
VALUES ();

INSERT INTO dishes_info()
VALUES ();
